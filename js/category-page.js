const productsBtn=document.querySelectorAll(".product__btn"),cartProductsList=document.querySelector(".cart__list"),cart=document.querySelector(".cart__wrapper"),cartQuantity=cart.querySelector(".cart__quantity-numb"),cartQuantityWord=cart.querySelector(".cart__word"),fullPrice=document.querySelector(".sum");let price=0;const randomId=()=>Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),priceWithoutSpaces=t=>t.replace(/\s/g,""),normalPrice=t=>String(t).replace(/(\d)(?=(\d\d\d)+([^\d]|$))/g,"$1 "),plusFullPrice=t=>price+=t,minusFullPrice=t=>price-=t,printQuantity=()=>{let t=cartProductsList.children.length;cartQuantity.textContent=t,0==t?(cartQuantityWord.textContent=" товара",cartQuantity.textContent="нет"):1==t?cartQuantityWord.textContent=" товар":t<5&&t>1?cartQuantityWord.textContent=" товара":t>=5&&(cartQuantityWord.textContent=" товаров")},printFullPrice=()=>{fullPrice.textContent=normalPrice(price)+" ₴"},generateCartProduct=(t,e,r,i)=>`\n\t\t<li class="cart__item">\n\t\t\t<article class="c-item" data-id="${i}">\n\t\t\t\t<img src="${t}" alt="${e}" class="c-item__image">\n\t\t\t\t<a href="" class="c-item__link">\n\t\t\t\t\t<h4 class="c-item__title">${e}</h4>\n\t\t\t\t\t<span class="c-item__price">${normalPrice(r)}</span>\n\t\t\t\t</a>\n\t\t\t\t<button class="c-item__delete" aria-label="Удалить товар">\n\t\t\t\t\t<svg class="">\n\t\t\t\t\t\t<use xlink:href="img/sprite.svg#close"></use>\n\t\t\t\t\t</svg>\n\t\t\t\t</button>\n\t\t\t</article>\n\t\t</li>\n\t`,deleteProducts=t=>{let e=t.querySelector(".c-item").dataset.id;document.querySelector(`.product__item[data-id="${e}"]`).querySelector(".product__btn").disabled=!1;let r=parseInt(priceWithoutSpaces(t.querySelector(".c-item__price").textContent));minusFullPrice(r),printFullPrice(),t.remove(),printQuantity()};productsBtn.forEach(t=>{t.closest(".product__item").setAttribute("data-id",Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)),t.addEventListener("click",t=>{let e=t.currentTarget,r=e.closest(".product__item"),i=r.dataset.id,c=r.querySelector(".product__image--first").getAttribute("src"),n=r.querySelector(".product__name").textContent,s=priceWithoutSpaces(r.querySelector(".product__price").textContent),a=parseInt(priceWithoutSpaces(r.querySelector(".product__price").textContent));price+=a,printFullPrice(),cartProductsList.insertAdjacentHTML("afterbegin",generateCartProduct(c,n,s,i)),printQuantity(),e.disabled=!0})}),cartProductsList.addEventListener("click",t=>{t.target.classList.contains("c-item__delete")&&deleteProducts(t.target.closest(".cart__item"))});const productSwiper=new Swiper(".product__swiper",{loop:!0,centeredSlides:!0,watchSlidesVisibility:!0,navigation:{nextEl:".product-swiper-btn-next",prevEl:".product-swiper-btn-prev"},pagination:{el:".product-swiper-pagination",clickable:!0},slidesPerColumn:1,slidesPerView:1,on:{init(){Array.from(this.slides).forEach((t,e)=>{const r=t.querySelector(".swiper-slide__wrapper");t.classList.contains("swiper-slide-visible")||(r.style.display="none")})},setTranslate(){Array.from(this.slides).forEach(t=>{t.classList.contains("swiper-slide-visible")&&(t.querySelector(".swiper-slide__wrapper").style.display="")})},transitionEnd(){Array.from(this.slides).forEach(t=>{t.classList.contains("swiper-slide-visible")||(t.querySelector(".swiper-slide__wrapper").style.display="none")})}}});
//# sourceMappingURL=category-page.js.map
