{"version":3,"sources":["category-page.js"],"names":["productsBtn","document","querySelectorAll","cartProductsList","querySelector","cart","cartQuantity","cartQuantityWord","fullPrice","price","randomId","Math","random","toString","substring","priceWithoutSpaces","str","replace","normalPrice","String","plusFullPrice","currentPrice","minusFullPrice","printQuantity","productsListLength","children","length","textContent","printFullPrice","generateCartProduct","img","title","id","deleteProducts","productParent","dataset","disabled","parseInt","remove","forEach","el","closest","setAttribute","addEventListener","e","self","currentTarget","parent","getAttribute","priceString","priceNumber","insertAdjacentHTML","target","classList","contains","productSwiper","Swiper","loop","centeredSlides","watchSlidesVisibility","navigation","nextEl","prevEl","pagination","clickable","slidesPerColumn","slidesPerView","on","[object Object]","Array","from","this","slides","swiperSlide","i","slide","style","display"],"mappings":"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","file":"category-page.js","sourcesContent":["const productsBtn = document.querySelectorAll('.product__btn');\r\nconst cartProductsList = document.querySelector('.cart__list');\r\nconst cart = document.querySelector('.cart__wrapper');\r\nconst cartQuantity = cart.querySelector('.cart__quantity-numb');\r\nconst cartQuantityWord = cart.querySelector('.cart__word');\r\nconst fullPrice = document.querySelector('.sum');\r\nlet price = 0;\r\n\r\nconst randomId = () => {\r\n\treturn Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15);\r\n};\r\n\r\nconst priceWithoutSpaces = (str) => {\r\n\treturn str.replace(/\\s/g, '');\r\n};\r\n\r\nconst normalPrice = (str) => {\r\n\treturn String(str).replace(/(\\d)(?=(\\d\\d\\d)+([^\\d]|$))/g, '$1 ');\r\n};\r\n\r\nconst plusFullPrice = (currentPrice) => {\r\n\treturn price += currentPrice;\r\n};\r\n\r\nconst minusFullPrice = (currentPrice) => {\r\n\treturn price -= currentPrice;\r\n};\r\n\r\nconst printQuantity = () => {\r\n\tlet productsListLength = cartProductsList.children.length; // удалил симпл бар контент блок, добавил просто список\r\n\tcartQuantity.textContent = productsListLength;\r\n\tif (productsListLength == 0) {\r\n\t\tcartQuantityWord.textContent = ` товара`;\r\n\t\tcartQuantity.textContent = 'нет';\r\n\t} else if (productsListLength == 1) {\r\n\t\tcartQuantityWord.textContent = ` товар`;\r\n\t} else if (productsListLength < 5 && productsListLength > 1) {\r\n\t\tcartQuantityWord.textContent = ` товара`;\r\n\t} else if (productsListLength >= 5) {\r\n\t\tcartQuantityWord.textContent = ` товаров`;\r\n\t}\r\n\r\n};\r\nconst printFullPrice = () => {\r\n\tfullPrice.textContent = `${normalPrice(price)} ₴`;\r\n};\r\n\r\nconst generateCartProduct = (img, title, price, id) => {\r\n\treturn `\r\n\t\t<li class=\"cart__item\">\r\n\t\t\t<article class=\"c-item\" data-id=\"${id}\">\r\n\t\t\t\t<img src=\"${img}\" alt=\"${title}\" class=\"c-item__image\">\r\n\t\t\t\t<a href=\"\" class=\"c-item__link\">\r\n\t\t\t\t\t<h4 class=\"c-item__title\">${title}</h4>\r\n\t\t\t\t\t<span class=\"c-item__price\">${normalPrice(price)}</span>\r\n\t\t\t\t</a>\r\n\t\t\t\t<button class=\"c-item__delete\" aria-label=\"Удалить товар\">\r\n\t\t\t\t\t<svg class=\"\">\r\n\t\t\t\t\t\t<use xlink:href=\"img/sprite.svg#close\"></use>\r\n\t\t\t\t\t</svg>\r\n\t\t\t\t</button>\r\n\t\t\t</article>\r\n\t\t</li>\r\n\t`;\r\n};\r\n\r\n\r\n\r\nconst deleteProducts = (productParent) => {\r\n\tlet id = productParent.querySelector('.c-item').dataset.id;\r\n\tdocument.querySelector(`.product__item[data-id=\"${id}\"]`).querySelector('.product__btn').disabled = false;\r\n\tlet currentPrice = parseInt(priceWithoutSpaces(productParent.querySelector('.c-item__price').textContent));\r\n\tminusFullPrice(currentPrice);\r\n\tprintFullPrice();\r\n\tproductParent.remove();\r\n\tprintQuantity();\r\n};\r\n\r\nproductsBtn.forEach(el => {\r\n\tel.closest('.product__item').setAttribute('data-id', randomId());\r\n\tel.addEventListener('click', (e) => {\r\n\t\tlet self = e.currentTarget;\r\n\t\tlet parent = self.closest('.product__item');\r\n\t\tlet id = parent.dataset.id;\r\n\t\tlet img = parent.querySelector('.product__image--first').getAttribute('src');\r\n\t\tlet title = parent.querySelector('.product__name').textContent;\r\n\t\tlet priceString = priceWithoutSpaces(parent.querySelector('.product__price').textContent);\r\n\t\tlet priceNumber = parseInt(priceWithoutSpaces(parent.querySelector('.product__price').textContent));\r\n\t\tplusFullPrice(priceNumber);\r\n\t\tprintFullPrice();\r\n\t\tcartProductsList.insertAdjacentHTML('afterbegin', generateCartProduct(img, title, priceString, id));\r\n\t\tprintQuantity();\r\n\t\tself.disabled = true;\r\n\t});\r\n});\r\n\r\ncartProductsList.addEventListener('click', (e) => {\r\n\tif (e.target.classList.contains('c-item__delete')) {\r\n\t\tdeleteProducts(e.target.closest('.cart__item'));\r\n\t}\r\n});;\r\n\r\nconst productSwiper = new Swiper('.product__swiper', {\r\n\tloop: true,\r\n\tcenteredSlides: true,\r\n\twatchSlidesVisibility: true,\r\n\tnavigation: {\r\n\t\tnextEl: '.product-swiper-btn-next',\r\n\t\tprevEl: '.product-swiper-btn-prev',\r\n\t},\r\n\tpagination: {\r\n\t\tel: '.product-swiper-pagination',\r\n\t\tclickable: true,\r\n\t},\r\n\tslidesPerColumn: 1,\r\n\tslidesPerView: 1,\r\n\ton: {\r\n\t\tinit() {\r\n\t\t\tArray.from(this.slides).forEach((swiperSlide, i) => {\r\n\t\t\t\tconst slide = swiperSlide.querySelector('.swiper-slide__wrapper');\r\n\t\t\t\tif (!swiperSlide.classList.contains('swiper-slide-visible')) {\r\n\t\t\t\t\tslide.style.display = 'none';\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tsetTranslate() {\r\n\t\t\tArray.from(this.slides).forEach((slide,) => {\r\n\t\t\t\tif (slide.classList.contains('swiper-slide-visible')) {\r\n\t\t\t\t\tslide.querySelector('.swiper-slide__wrapper').style.display = '';\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\ttransitionEnd() {\r\n\t\t\tArray.from(this.slides).forEach((slide) => {\r\n\t\t\t\tif (!slide.classList.contains('swiper-slide-visible')) {\r\n\t\t\t\t\tslide.querySelector('.swiper-slide__wrapper').style.display = 'none';\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t},\r\n});\r\n"]}